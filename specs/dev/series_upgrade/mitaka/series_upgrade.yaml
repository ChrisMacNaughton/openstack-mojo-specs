trusty-mitaka:
  series: trusty
  services:
    percona-cluster:
      num_units: 1
      charm: percona-cluster
      series: trusty
      constraints: mem=3G
      options:
        min-cluster-size: 1
        root-password: ubuntu
        innodb-buffer-pool-size: 256M
        source: cloud:trusty-mitaka
    keystone:
      charm: keystone
      num_units: 1
      series: trusty
      options:
        admin-token: ubuntutesting
        admin-password: openstack
        openstack-origin: cloud:trusty-mitaka
    cinder:
      charm: cinder
      series: trusty
      num_units: 3
      options:
        openstack-origin: cloud:trusty-mitaka
        vip: "{{ MOJO_OS_VIP01 }}"
    rabbitmq-server: 
      charm: rabbitmq-server
      num_units: 1
      series: trusty
    cinder-hacluster:
      charm: hacluster
      series: trusty
      options:
        corosync_bindiface: ens2
        cluster_count: 3
  
  relations:
  - [ cinder, cinder-hacluster ]
  - [ keystone, percona-cluster ]
  - [ cinder, percona-cluster ]
  - [ keystone, cinder ]
  - [ rabbitmq-server, cinder]
