# Collect the stable charm branches from Launchpad
collect config=collect-stable-${MOJO_SERIES}

# Use juju deployer with full.yaml bundle
deploy config=full.yaml delay=0 target=${MOJO_SERIES}-liberty

# Check juju statuses are green and that hooks have finished
verify config=check_juju.py

# Create sdn on overcloud
script config=network_setup.py

# Setup glance images
script config=image_setup.py

# Setup keystone users
script config=keystone_setup.py

# Create 1 * tiny cirros and 1 * small precise instances on the overcloud
verify config=simple_os_checks.py MACHINES='cirros:m1.small:1' CLOUDINIT_WAIT="300"

# Remove charms directories
script config=wipe_charm_dir.py

# Collect the next (devel) charm branches from Launchpad
collect config=collect-next-${MOJO_SERIES}

# Run upgrade-charm on all services
script config=upgrade_all_services.py

# Check juju statuses are green and that hooks have finished
verify config=check_juju.py

# Create 1 * tiny cirros and 1 * small precise instances on the overcloud
verify config=simple_os_checks.py MACHINES='cirros:m1.small:1 precise:m1.small:1' CLOUDINIT_WAIT="300"

# Success
